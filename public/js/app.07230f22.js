(function(e){function t(t){for(var r,o,i=t[0],s=t[1],u=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},c=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0b3289":"1781f97c","chunk-2d216dc7":"a24091dd"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var c,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=o(e);var u=new Error;c=function(t){s.onerror=s.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",u.name="ChunkLoadError",u.type=r,u.request=c,n[1](u)}a[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:s})}),12e4);s.onerror=s.onload=c,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"12fb":function(e,t,n){},"19b3":function(e,t,n){"use strict";n("f5c1")},"1b17":function(e,t,n){"use strict";n("d4de")},2895:function(e,t,n){},"4a34":function(e,t,n){"use strict";n("12fb")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={id:"the-app"};function c(e,t,n,c,o,i){var s=Object(r["x"])("nav-bar"),u=Object(r["x"])("router-view");return Object(r["r"])(),Object(r["e"])("div",a,[Object(r["h"])(s,{id:"nav"}),Object(r["h"])(u,{id:"body"})])}var o=function(e){return Object(r["u"])("data-v-57100780"),e=e(),Object(r["s"])(),e},i=Object(r["g"])("‹ Back"),s=o((function(){return Object(r["f"])("span",null," WeGYB ",-1)}));function u(e,t,n,a,c,o){var u=Object(r["x"])("router-link");return Object(r["r"])(),Object(r["e"])("nav",{class:Object(r["n"])(["navbar",{big:!o.back}])},[Object(r["h"])(u,{to:{name:"Home"}},{default:Object(r["D"])((function(){return[i]})),_:1}),s],2)}var d={name:"NavBar",computed:{back:function(){return this.$route.meta.back}}},l=(n("5d55"),n("6b0d")),f=n.n(l);const b=f()(d,[["render",u],["__scopeId","data-v-57100780"]]);var p=b,h={name:"App",components:{NavBar:p}};n("4a34");const v=f()(h,[["render",c]]);var g=v,m=n("9483");Object(m["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7"),n("3ca3"),n("ddb0");var j=n("6c02"),O={class:"seperated-flex"},k=Object(r["g"])("Ride"),w=Object(r["g"])("Camera"),y=Object(r["g"])("Settings"),S=Object(r["g"])("Help");function M(e,t,n,a,c,o){var i=Object(r["x"])("router-link"),s=Object(r["x"])("router-view");return Object(r["r"])(),Object(r["e"])("div",O,[Object(r["f"])("div",null,[Object(r["h"])(i,{to:{name:"Ride"}},{default:Object(r["D"])((function(){return[k]})),_:1})]),Object(r["f"])("div",null,[Object(r["h"])(i,{to:{name:"Camera"}},{default:Object(r["D"])((function(){return[w]})),_:1})]),Object(r["f"])("div",null,[Object(r["h"])(i,{to:{name:"Settings"}},{default:Object(r["D"])((function(){return[y]})),_:1})]),Object(r["f"])("div",null,[Object(r["h"])(i,{to:{name:"Help"}},{default:Object(r["D"])((function(){return[S]})),_:1})]),Object(r["h"])(s)])}var x={name:"Home",components:{}};n("bc34");const T=f()(x,[["render",M],["__scopeId","data-v-d3986a62"]]);var _=T,R={class:"seperated-flex"},P=Object(r["g"])("×");function B(e,t,n,a,c,o){var i=Object(r["x"])("my-back"),s=Object(r["x"])("router-link");return Object(r["r"])(),Object(r["e"])("div",R,[Object(r["h"])(i),Object(r["h"])(s,{class:"close",to:{name:"Home"}},{default:Object(r["D"])((function(){return[P]})),_:1})])}var I={class:"my-back"},C={ref:"myBack"};function D(e,t,n,a,c,o){return Object(r["r"])(),Object(r["e"])("div",I,[Object(r["f"])("img",C,null,512)])}var E=n("1da1"),q=(n("96cf"),function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}),H={name:"my-back",data:function(){return{socket:null}},methods:{setImage:function(e){var t=e.data;this.$refs.myBack.src="data:image/jpeg;base64,"+t}},created:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q(1e3);case 2:e.socket=new WebSocket("ws://".concat(location.host,"/api/v1/mjpeg")),e.socket.onmessage=e.setImage;case 4:case"end":return t.stop()}}),t)})))()},unmounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.socket.close();case 1:case"end":return t.stop()}}),t)})))()}};n("ad30");const A=f()(H,[["render",D],["__scopeId","data-v-87d6996a"]]);var V=A,W={name:"Camera",components:{MyBack:V},methods:{back:function(){console.log("Back")}}};n("1b17");const N=f()(W,[["render",B],["__scopeId","data-v-8707c5cc"]]);var z=N,F={class:"seperated-flex"},L={id:"cover"};function $(e,t,n,a,c,o){var i=Object(r["x"])("stat"),s=Object(r["x"])("my-back"),u=Object(r["x"])("controls");return Object(r["r"])(),Object(r["e"])("div",F,[Object(r["h"])(i,{value:c.time,label:"Time"},null,8,["value"]),Object(r["h"])(i,{value:c.distance,label:"Distance",units:"M"},null,8,["value"]),Object(r["h"])(i,{value:c.speed,label:"Speed",units:"MPH"},null,8,["value"]),Object(r["h"])(i,{value:c.avgSpeed,label:"Average Speed",units:"MPH"},null,8,["value"]),Object(r["f"])("div",L,[Object(r["h"])(s),Object(r["h"])(u,{riding:c.riding,"onUpdate:riding":o.toggleRide},null,8,["riding","onUpdate:riding"])])])}var J={class:"ride-component"},U={class:"value"},G={key:0},Y={class:"label"};function K(e,t,n,a,c,o){return Object(r["r"])(),Object(r["e"])("div",J,[Object(r["f"])("div",U,[Object(r["g"])(Object(r["z"])(n.value)+" ",1),n.units?(Object(r["r"])(),Object(r["e"])("span",G,Object(r["z"])(n.units),1)):Object(r["d"])("",!0)]),Object(r["f"])("div",Y,Object(r["z"])(n.label),1)])}var Q={name:"stat",props:{value:{type:String,required:!0},label:{type:String,required:!0},units:{type:String,required:!1,default:""}}};n("f46d");const X=f()(Q,[["render",K],["__scopeId","data-v-5b87596e"]]);var Z=X;function ee(e,t,n,a,c,o){return Object(r["r"])(),Object(r["e"])("div",null,[Object(r["f"])("button",{class:Object(r["n"])(["play",{paused:n.riding}]),onClick:t[0]||(t[0]=function(){return o.toggleRide&&o.toggleRide.apply(o,arguments)})},null,2)])}var te={name:"controls",props:{riding:{type:Boolean,required:!0}},methods:{toggleRide:function(){this.$emit("update:riding",!this.riding)}}};n("19b3");const ne=f()(te,[["render",ee],["__scopeId","data-v-548a7a1d"]]);var re=ne;function ae(e,t,n,a,c,o){var i=Object(r["x"])("my-back",!0);return Object(r["E"])((Object(r["r"])(),Object(r["c"])(i,null,null,512)),[[r["B"],c.showVideo]])}var ce={name:"my-back-with-toggle",components:{MyBack:V},data:function(){return{showVideo:!0,toggleTimeout:null}},inject:["touchEvents"],methods:{peak:function(){var e=this;this.clearToggleTimeout(),this.showVideo=!0,this.toggleTimeout=setTimeout((function(){e.showVideo=!1,e.clearToggleTimeout()}),4e3)},toggle:function(){this.clearToggleTimeout(),this.showVideo=!this.showVideo},clearToggleTimeout:function(){this.toggleTimeout&&(clearInterval(this.toggleTimeout),this.toggleTimeout=null)},receivedStream:function(){this.peak()},receivedMessage:function(){this.peak()}},created:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q(1e3);case 2:e.touchEvents.on("tap",e.peak),e.touchEvents.on("dbltap",e.toggle);case 4:case"end":return t.stop()}}),t)})))()},unmounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.touchEvents.off("tap"),e.touchEvents.off("dbltap");case 2:case"end":return t.stop()}}),t)})))()}};const oe=f()(ce,[["render",ae]]);var ie=oe,se=n("d4ec"),ue=n("bee2"),de=n("ade3"),le=(n("a15b"),n("d81d"),function(){return(new Date).getTime()/1e3}),fe=function(e){var t=Math.floor(e/3600),n=Math.floor(e/60)%60,r=e%60;return[t,n,r].map(be).join(":")},be=function(e){return e<10?"0"+e:""+e},pe=function(e){var t=Math.floor(e),n=Math.round(100*e)%100;return be(t)+"."+be(n)},he=function(e,t){var n=e.longitude,r=e.latitude,a=t.longitude,c=t.latitude,o=6371,i=ve(c-r),s=ve(a-n),u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(ve(r))*Math.cos(ve(c))*Math.sin(s/2)*Math.sin(s/2),d=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),l=o*d;return l},ve=function(e){return e*Math.PI/180},ge=function(){function e(t){var n=this;Object(se["a"])(this,e),Object(de["a"])(this,"updateDistance",(function(e){if(!(e.coords.accuracy>1e4)){var t=n.prevCoords;if(n.prevCoords=e.coords,t){var r=e.timestamp/1e3-n.startTime;n.distance+=he(t,e.coords),n.speed=e.speed||0,n.avgSpeed=r>0?3600*n.distance/r:0}}})),this.callbackMethod=t}return Object(ue["a"])(e,[{key:"start",value:function(){var e=this;this.callback||(this.startTime=le(),this.distance=0,this.speed=0,this.avgSpeed=0,this.callback=setInterval((function(){e.callbackWithStats()}),200),navigator.geolocation.watchPosition(this.updateDistance))}},{key:"stop",value:function(){clearInterval(this.callback),navigator.geolocation.clearWatch(this.callback),this.callback=null}},{key:"callbackWithStats",value:function(){var e=Math.round(le()-this.startTime);return this.callbackMethod({seconds:e,time:fe(e),distance:pe(this.distance),speed:pe(this.speed),avgSpeed:pe(this.avgSpeed)})}}]),e}(),me={name:"Ride",components:{Stat:Z,Controls:re,MyBack:ie},data:function(){return{riding:!1,tracker:new ge(this.updateRideStats),time:"00:00:00",distance:"00.00",speed:"00.00",avgSpeed:"00.00"}},methods:{updateRideStats:function(e){var t=e.time,n=e.distance,r=e.speed,a=e.avgSpeed;this.time=t,this.distance=n,this.speed=r,this.avgSpeed=a},toggleRide:function(){this.riding?(this.riding=!1,this.tracker.stop()):(this.riding=!0,this.tracker.start())}},beforeRouteLeave:function(e,t,n){var r=!this.riding||window.confirm("Do you want to cancel this ride?");r||this.tracker.stop(),n(r)}};n("c8b4");const je=f()(me,[["render",$],["__scopeId","data-v-0c220297"]]);var Oe=je,ke=[{path:"/ride",name:"Ride",component:Oe,meta:{back:!0}},{path:"/help",name:"Help",component:function(){return n.e("chunk-2d216dc7").then(n.bind(null,"c3ef"))},meta:{back:!0}},{path:"/settings",name:"Settings",component:function(){return n.e("chunk-2d0b3289").then(n.bind(null,"26d3"))},meta:{back:!0}},{path:"/",name:"Home",component:_,children:[{path:"/camera",name:"Camera",component:z}]}],we=Object(j["a"])({history:Object(j["b"])(),routes:ke}),ye=we,Se=n("c8b5"),Me=n.n(Se),xe=Object(ue["a"])((function e(t){var n=this;Object(se["a"])(this,e),Object(de["a"])(this,"on",(function(e,t){n.events[e]=t})),Object(de["a"])(this,"off",(function(e){delete n.events[e]})),Object(de["a"])(this,"trigger",(function(e){e.target.matches("button")||n.events[e.type]&&n.events[e.type]()}));var r=new Me.a.Tap({event:"tap",taps:1}),a=new Me.a.Tap({event:"dbltap",taps:2});a.recognizeWith(r),r.requireFailure(a);var c=new Me.a.Manager(t);c.add([a,r]),c.on("tap",this.trigger),c.on("dbltap",this.trigger),this.events={}})),Te=xe;Object(r["b"])(g).use(ye).provide("touchEvents",new Te(document.querySelector("#app"))).mount("#app")},"5d55":function(e,t,n){"use strict";n("8276")},"6ff6":function(e,t,n){},8276:function(e,t,n){},ac49:function(e,t,n){},ad30:function(e,t,n){"use strict";n("ac49")},bc34:function(e,t,n){"use strict";n("e9ca")},c8b4:function(e,t,n){"use strict";n("6ff6")},d4de:function(e,t,n){},e9ca:function(e,t,n){},f46d:function(e,t,n){"use strict";n("2895")},f5c1:function(e,t,n){}});
//# sourceMappingURL=app.07230f22.js.map